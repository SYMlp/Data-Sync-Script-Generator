---
- **文件状态**: 指导原则
- **创建目的**: 提供编写高质量、结构化提示词的方法论，是所有“角色定义”文件的理论基础。
- **前置依赖**: 无
- **后续指引**: 指导了 `(成果)软件架构师提示词.md`, `(成果)高级软件工程师提示词.md`, `(成果)功能设计质量保证检验员提示词.md` 等所有角色提示词的创建。
---

# (成果) 指导调用大语言模型提示词编写方式

**版本**: 1.2
**更新日期**: 2025-11-19

---

## 一、 核心指令设计思路 (Core Prompt Design Philosophy)

为确保 AI 模型能精准、高效地理解并执行任务，我们设计的指令（Prompt）应遵循以下核心思路。这门定义和优化指令以引导 AI 模型产生期望响应的艺术与科学，被称为“提示词工程”（Prompt Engineering）。其最终目标是：**提升响应准确性、降低Token消耗、节约成本**。

1.  **角色化 (Role-Play)**: 明确赋予 AI 一个专家角色。例如，不要只说“写一段关于网络安全的代码”，而应指定“你是一位在Nginx DDoS防护方面拥有十年经验的资深网络安全架构师”。
2.  **目标导向 (Goal-Oriented)**: 清晰地阐述任务的最终目标和期望产出的具体形式。例如，明确要求“提供一份分步走的策略清单，包含方法、防火墙规则和可疑活动分析”。
3.  **引导而非命令 (Guidance over Orders)**: 使用引导性的语言，而不是生硬的命令。这有助于激发模型更深层次的“思考”和推理能力。
4.  **简洁清晰 (Concise and Clear)**: 在保证信息完整的前提下，指令应尽可能简洁明了。避免使用模糊或多义的词汇。
5.  **技术整合 (Technique Combination)**: 结合多种提示技巧（如 Zero-Shot, One-Shot, CoT-思维链等）来应对不同复杂度的任务。
6.  **任务拆解 (Task Decomposition)**: 针对复杂任务，必须明确指示模型将大目标拆解为小步骤（Sub-tasks）。遵循“拆解 -> 逐步思考与执行 -> 汇总”的流程，避免试图一次性解决所有问题。这能有效利用模型的推理能力，减少幻觉。

## 二、 指令编写步骤要求 (Step-by-Step Prompting Guide)

一份高质量的指令通常由以下几个结构化部分组成：

1.  **【步骤一：定义角色与专长 (Define Role and Expertise)】**
    *   **要求**: 在指令的最开始就明确指定 AI 的身份。
    *   **示例**: `你是一位专注于使用 Python 进行数据分析的专家...`

2.  **【步骤二：阐述任务与目标 (Specify The Task, Clear Goals)】**
    *   **要求**: 详细说明需要执行的具体任务，以及希望达成的最终目标是什么。
    *   **示例**: `...你的任务是分析附件中的销售数据，并生成一份季度销售报告。`

3.  **【步骤三：提供背景与上下文 (Provide Context)】**
    *   **要求**: 给予必要的背景信息、数据或示例。对于需要特定格式的输出，提供一个或多个示例（One-Shot / Few-Shot Prompting）。
    *   **示例**: `...报告需要包含三个部分：总销售额、各区域销售对比（图表）、以及关键增长点的分析。去年同期的总销售额是 120 万。`

4.  **【步骤四：明确输出要求 (Define Output Format)】**
    *   **要求**: 指定输出的格式、风格、长度和语言。
    *   **示例**: `...请以 Markdown 格式输出报告，整体风格要求专业、正式，总长度不超过 800 字。`

5.  **【步骤五：施加约束与限制 (Add Constraints)】**
    *   **要求**: 告知 AI 不应该做什么，或者需要规避哪些内容。
    *   **示例**: `...在分析中，请不要涉及单个销售人员的业绩，只关注区域整体表现。`

6.  **【步骤六：引导思维过程 (Guide the Thinking Process)】**
    *   **要求**: （针对复杂任务）明确要求模型展示其“一步一步”的思考或执行路径，最后进行汇总。对于简单任务可省略。
    *   **核心逻辑**: 大任务拆解 -> 分步思考/执行 -> 全局汇总。
    *   **示例**: `...这是一个复杂的系统设计。请按照以下步骤执行：1. 拆解需求为关键模块；2. 逐步分析每个模块的实现方案；3. 最后汇总生成完整的架构文档。Let's think step by step.`

## 三、 模型最佳实践 (Model-Specific Best Practices)

虽然上述原则具有普适性，但针对不同模型的特性，我们可以进行微调以达到最佳效果。

### 1. Gemini 2.5 Pro

Gemini 2.5 Pro 被设计为一个具备深度思考和推理能力的模型，尤其擅长代码生成、应用创建和复杂问题分解。

*   **发挥其推理能力**: 采用“Reason + Act (ReAct)”的提示模式。在指令中鼓励它“先思考，再行动”。
    *   **示例**: `在生成 Nginx 防护规则之前，请先分析并列出三种最常见的 DDoS 攻击向量，然后针对这三种向量，逐一给出你的防护策略和具体配置代码。`
*   **利用其长上下文窗口**: 当处理大型文档或数据集时，可以直接将大量信息喂给它，并要求它进行总结、分析或转换，因为它能很好地处理和理解长篇上下文。
*   **调整 Temperature 参数**:
    *   **推理任务 (Reasoning)**: 对于需要逻辑、代码修复或精确分析的任务，建议将 `Temperature` 设置为较低值，如 `0.2`。
    *   **创意任务 (Creative)**: 对于需要生成文案、想法或多样性内容的任务，可以适当调高 `Temperature`，如 `1.0` 或更高。
*   **明智地设置输出长度**: 根据任务需要设定合理的 `Output Length`，以在速度、成本和响应质量之间取得平衡。

### 2. Claude 3.5 Sonnet

(注意：当前参考资料主要针对 `Claude 3.5 Sonnet`，其原则可广泛应用于 Claude 系列模型。)

Claude 系列模型以其强大的语言理解、写作和遵循复杂指令的能力而著称。

*   **强调结构化输出**: Claude 对 XML 标签等结构化格式的遵循度非常高。在指令中用标签明确框定不同部分，可以获得非常规整和可靠的输出。
    *   **示例**:
        ```
        请按照以下结构生成报告：
        <report>
          <title>季度销售分析</title>
          <summary>在此处填写摘要...</summary>
          <data_analysis>
            <region name="华东">在此处填写华东区分析...</region>
            <region name="华北">在此处填写华北区分析...</region>
          </data_analysis>
        </report>
        ```
*   **利用其强大的“角色扮演”能力**: Claude 非常擅长模仿特定的写作风格或人物口吻。在指令中可以非常细致地描述期望的风格。
    *   **示例**: `请你扮演莎士比亚，用他的风格写一首关于“代码Bug”的十四行诗。`
*   **精炼指令**: Claude 对自然语言的理解力很强，通常不需要像对早期模型那样进行过度复杂的指令“绕弯”。可以直接、清晰地表达你的需求。

## 四、 参考文献 (References)

*   Sebastian, C. (2025). *Best Practices For Prompt Engineering With Gemini 2.5 Pro*. Google Cloud - Community. [https://medium.com/google-cloud/best-practices-for-prompt-engineering-with-gemini-2-5-pro-755cb473de70](https://medium.com/google-cloud/best-practices-for-prompt-engineering-with-gemini-2-5-pro-755cb473de70)
*   DocsBot AI. (2024). *Gemini 2.5 Pro vs Claude 3.5 Sonnet*. [https://docsbot.ai/models/compare/gemini-2-5-pro/claude-3-5-sonnet](https://docsbot.ai/models/compare/gemini-2-5-pro/claude-3-5-sonnet)

## 五、 提示词维护与迭代原则 (Maintenance & Iteration Principles)

为了保护已验证的资产并确保工作流的稳定性，在维护和升级提示词时，必须遵循以下原则：

1.  **追加优于替换 (Append over Replace)**:
    *   **原则**: 当引入新特性（如新的思维链模式、新的输出格式）时，应优先将其作为“增强选项”或“补充说明”追加到现有文件中，而不是直接覆盖旧内容。
    *   **理由**: 旧的提示词往往经过了多次实战打磨，包含了许多隐性的边界条件处理。随意删除可能导致意想不到的效果退化。

2.  **冲突解决策略 (Conflict Resolution)**:
    *   仅当新内容与旧内容存在**逻辑互斥**（例如：旧规则要求“禁止使用类”，新规则要求“必须使用类”）时，才允许修改旧内容。
    *   在修改前，必须评估旧规则的原始意图，并确保新方案能提供更好的结果，而不仅仅是“不同”。

3.  **向下兼容 (Backward Compatibility)**:
    *   保留旧的指令模板（Instruction Template）和关键的输出格式定义，确保依赖这些格式的下游工具或习惯不会失效。
